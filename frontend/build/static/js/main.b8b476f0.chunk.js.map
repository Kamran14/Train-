{"version":3,"sources":["App.js","index.js"],"names":["API_BASE","Enter","state","videoPath","youtubePath","youtubePathValid","valid","done","onFileChange","e","target","value","split","pop","toUpperCase","matches","_this","setState","submitFile","alert","onYoutubeChange","match","submitYoutube","console","log","axios","url","concat","method","headers","Content-Type","catch","err","error","setTimeout","props","onEnter","contentType","data","FormData","append","window","location","hash","length","this","onChange","replace","react_default","a","createElement","className","id","disabled","type","placeholder","Component","Video","ready","videoRef","React","createRef","_this3","current","addEventListener","onReady","controls","ref","App","video","lang","goneWave","wave","updateVideo","_this4","stop","SiriWave","container","document","getElementById","width","innerWidth","height","innerHeight","style","speed","start","App_Video","App_Enter","ReactDOM","render","src_App_0"],"mappings":"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","file":"static/js/main.b8b476f0.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport './App.scss';\r\nimport SiriWave from 'siriwave';\r\nimport axios from 'axios';\r\n// import Dropzone from 'react-dropzone';\r\n\r\nconst API_BASE = \"http://34.67.200.241:5000\";\r\n//http://34.67.200.241:5000/upload\r\n\r\nclass Enter extends Component {\r\n  state = {\r\n    videoPath: '',\r\n    youtubePath: '',\r\n    youtubePathValid: false,\r\n    valid: false,\r\n    done: false\r\n  };\r\n\r\n  onFileChange = (e) => {\r\n    // eslint-disable-next-line\r\n    if (e.target.value.split('.').pop().toUpperCase() == \"MP4\") {\r\n      const matches = e.target.value;\r\n      this.setState({\r\n        videoPath: matches,\r\n        valid: e.target.value !== null,\r\n      });\r\n\r\n      if (e.target.value !== null) {\r\n        this.submitFile('multipart/form-data');\r\n      }\r\n\r\n    } else {\r\n      e.target.value = '';\r\n      alert(\"Please upload a valid .mp4\");\r\n    }\r\n  };\r\n\r\n  onYoutubeChange = (e) => {\r\n    // eslint-disable-next-line\r\n    const matches = e.target.value.match(/http(?:s?):\\/\\/(?:www\\.)?youtu(?:be\\.com\\/watch\\?v=|\\.be\\/)([\\w\\-\\_]*)(&(amp;)?‌​[\\w\\?‌​=]*)?/i);\r\n    this.setState({\r\n      youtubePath: matches !== null ? matches[1] : e.target.value,\r\n      youtubePathValid: matches !== null,\r\n    });\r\n\r\n    if (matches !== null) {\r\n      this.submitYoutube();\r\n    }\r\n  };\r\n\r\n\r\n  submitYoutube = () => {\r\n\r\n    console.log(\"submit youtube1\");\r\n    this.setState({ done: true }, () => {\r\n\r\n\r\n      axios({\r\n        url: `${API_BASE}/youtube?v=${this.state.youtubePath}`,\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'none'\r\n        }\r\n      }).catch((err) => {\r\n        console.error(\"ERROR: \" + err);\r\n      })\r\n      setTimeout(() => {\r\n        this.props.onEnter(this.state.youtubePath);\r\n      }, 1000);\r\n    });\r\n  }\r\n\r\n\r\n  submitFile = (contentType) => {\r\n    console.log(\"submit file\");\r\n    const data = new FormData();\r\n    data.append(\"file\", this.state.videoPath);\r\n\r\n    axios({\r\n      url: `${API_BASE}/upload`,\r\n      method: 'POST',\r\n      data: data,\r\n      headers: {\r\n        'Content-Type': contentType\r\n      }\r\n    }).catch((err) => {\r\n      console.error(\"ERROR: \" + err);\r\n    })\r\n\r\n\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n    if (window.location.hash.length > 1) {\r\n      this.onChange({ target: { value: window.location.hash.replace('#', '') } });\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <div className={\"enter\" + (this.state.done ? ' done' : '')} id=\"enter-area\">\r\n        <div className=\"fileContainer\">\r\n          <button className=\"btn\" disabled={this.state.valid}>upload a video file</button>\r\n          <input className={\"custom-file-input \" + (this.state.valid ? 'valid' : '')} disabled={this.state.valid} type='file' placeholder=\"Choose a video to analyze!\" onChange={this.onFileChange}></input>\r\n        </div>\r\n\r\n        <input className={(this.state.valid && this.state.youtubePathValid) ? 'valid' : ''} disabled={!this.state.valid} type=\"text\" placeholder=\"Enter Youtube URL\" value={this.state.youtubePath} onChange={this.onYoutubeChange}></input>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass Video extends Component {\r\n  state = {\r\n    ready: false\r\n  }\r\n\r\n  videoRef = React.createRef();\r\n\r\n  componentDidMount() {\r\n    this.videoRef.current.addEventListener('canplay', () => {\r\n      this.setState({ ready: true });\r\n      this.props.onReady();\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={\"video-container\" + (this.state.ready ? ' ready' : '')}>\r\n        {this.state.ready ? null : <div className=\"loader\">\r\n          <div className=\"spinner\"></div>\r\n          <p>Analyzing... (this may take a while)</p>\r\n        </div>}\r\n        <video controls ref={this.videoRef}>\r\n          {/* <source src={`${API_BASE}compare/?ref=${youtubePath}&compare=${id2}`} type=\"video/mp4\" /> */}\r\n        </video>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nclass App extends Component {\r\n  state = {\r\n    video: null,\r\n    lang: null,\r\n    goneWave: false\r\n  };\r\n\r\n  wave = null;\r\n  updateVideo = (video, lang) => {\r\n    this.setState({ video, lang });\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.wave = new SiriWave({\r\n      container: document.getElementById('app'),\r\n      width: window.innerWidth,\r\n      height: window.innerHeight * 2,\r\n      style: 'ios9',\r\n      speed: 0.09\r\n    });\r\n    this.wave.start();\r\n  }\r\n\r\n  onReady = () => {\r\n    this.setState({ goneWave: true });\r\n    setTimeout(() => {\r\n      this.wave.stop();\r\n    }, 5000);\r\n  }\r\n\r\n\r\n  componentWillUnmount() {\r\n    this.wave.stop();\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"app\" className={this.state.goneWave ? 'goneWave' : ''}>\r\n        {this.state.video !== null ? <Video onReady={this.onReady} video={this.state.video} lang={this.state.lang} /> : <Enter onEnter={this.updateVideo} />}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.scss';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}